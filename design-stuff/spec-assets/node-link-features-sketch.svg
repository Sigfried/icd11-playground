<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 620" font-family="-apple-system, sans-serif">
  <style>
    .label { font-size: 11px; fill: #d4d4d4; }
    .label-small { font-size: 9px; fill: #808080; }
    .badge { font-size: 8px; fill: #4fc1ff; }
    .annotation { font-size: 10px; fill: #ce9178; font-style: italic; }
    .annotation-line { stroke: #ce9178; stroke-width: 1; stroke-dasharray: 4,3; fill: none; }
    .edge { stroke: #555; stroke-width: 1.5; fill: none; }
    .edge-transitory { stroke: #555; stroke-width: 1; stroke-dasharray: 3,3; fill: none; opacity: 0.6; }
  </style>

  <rect width="900" height="620" fill="#1e1e1e" rx="8"/>
  <text x="450" y="28" text-anchor="middle" font-size="13" fill="#569cd6" font-weight="600">Node-Link View — Combined Features Sketch</text>

  <!-- === LAYER 0: Grandparent (ancestors beyond 1-hop) === -->
  <rect x="340" y="50" width="160" height="32" rx="4" fill="#2d2d30" stroke="#3c3c3c"/>
  <text x="420" y="70" text-anchor="middle" class="label">Endocrine diseases</text>
  <text x="505" y="63" class="badge">12↓</text>

  <!-- Edge: grandparent -> parent -->
  <line x1="420" y1="82" x2="420" y2="120" class="edge"/>

  <!-- Annotation: ancestors beyond 1-hop -->
  <line x1="520" y1="66" x2="620" y2="52" class="annotation-line"/>
  <text x="625" y="48" class="annotation">#1: Ancestors beyond 1-hop</text>
  <text x="625" y="60" class="annotation-small label-small">shown at normal size, not just parents</text>

  <!-- === LAYER 1: Parents === -->
  <!-- Parent 1 (canonical) - larger node (sizing by descendants) -->
  <rect x="310" y="120" width="220" height="40" rx="4" fill="#2d4a2d" stroke="#6a9955" stroke-width="2"/>
  <text x="420" y="140" text-anchor="middle" class="label" font-weight="600">Diabetes mellitus</text>
  <text x="420" y="154" text-anchor="middle" class="badge">1↑ 8↓ · 247 desc</text>

  <!-- Parent 2 (smaller - fewer descendants) -->
  <rect x="80" y="128" width="150" height="30" rx="4" fill="#2d2d30" stroke="#3c3c3c"/>
  <text x="155" y="147" text-anchor="middle" class="label">Pregnancy complications</text>
  <text x="233" y="142" class="badge">2↑</text>

  <!-- Annotation: node sizing -->
  <line x1="540" y1="140" x2="630" y2="115" class="annotation-line"/>
  <text x="635" y="112" class="annotation">#6: Node sized by descendant count</text>
  <text x="635" y="124" class="annotation-small label-small">Diabetes (247 desc) wider than Pregnancy</text>

  <!-- Edges: parents -> focus -->
  <line x1="420" y1="160" x2="420" y2="200" class="edge"/>
  <line x1="155" y1="158" x2="350" y2="200" class="edge"/>

  <!-- === LAYER 2: Focus node === -->
  <rect x="300" y="200" width="240" height="44" rx="4" fill="#4a3a00" stroke="#dcdcaa" stroke-width="2.5"/>
  <text x="420" y="222" text-anchor="middle" fill="#dcdcaa" font-size="12" font-weight="700">DM in pregnancy</text>
  <text x="420" y="236" text-anchor="middle" class="badge">2↑ 5↓ · 12 desc</text>

  <!-- === LAYER 3: Children — mix of visible + collapsed cluster === -->

  <!-- Visible child 1 -->
  <rect x="80" y="290" width="160" height="34" rx="4" fill="#2d2d30" stroke="#3c3c3c"/>
  <text x="160" y="310" text-anchor="middle" class="label">Pre-existing Type 1 DM</text>
  <text x="244" y="304" class="badge">1↑ 3↓</text>

  <!-- Visible child 2 -->
  <rect x="260" y="290" width="160" height="34" rx="4" fill="#2d2d30" stroke="#3c3c3c"/>
  <text x="340" y="310" text-anchor="middle" class="label">Pre-existing Type 2 DM</text>
  <text x="424" y="304" class="badge">1↑ 2↓</text>

  <!-- Collapsed cluster -->
  <rect x="440" y="286" width="130" height="42" rx="12" fill="#2d2d30" stroke="#569cd6" stroke-width="1.5" stroke-dasharray="4,2"/>
  <text x="505" y="306" text-anchor="middle" fill="#569cd6" font-size="11">3 more children</text>
  <text x="505" y="318" text-anchor="middle" class="label-small">7 descendants total</text>

  <!-- Edges: focus -> children -->
  <line x1="370" y1="244" x2="160" y2="290" class="edge"/>
  <line x1="420" y1="244" x2="340" y2="290" class="edge"/>
  <line x1="470" y1="244" x2="505" y2="286" class="edge" stroke-dasharray="4,2"/>

  <!-- Annotation: collapsible cluster -->
  <line x1="575" y1="307" x2="650" y2="290" class="annotation-line"/>
  <text x="655" y="287" class="annotation">#2: Collapsed cluster</text>
  <text x="655" y="299" class="annotation-small label-small">dashed border, rounded, shows count</text>
  <text x="655" y="311" class="annotation-small label-small">click to expand; hover to preview</text>

  <!-- === Transitory hover nodes === -->
  <!-- Hovering over "Pre-existing Type 1 DM" shows its children transiently -->
  <rect x="20" y="372" width="120" height="26" rx="4" fill="#2d2d30" stroke="#569cd6" stroke-width="1" opacity="0.5"/>
  <text x="80" y="389" text-anchor="middle" class="label" opacity="0.6">Mild</text>

  <rect x="150" y="372" width="120" height="26" rx="4" fill="#2d2d30" stroke="#569cd6" stroke-width="1" opacity="0.5"/>
  <text x="210" y="389" text-anchor="middle" class="label" opacity="0.6">Moderate</text>

  <rect x="280" y="372" width="120" height="26" rx="4" fill="#2d2d30" stroke="#569cd6" stroke-width="1" opacity="0.5"/>
  <text x="340" y="389" text-anchor="middle" class="label" opacity="0.6">Severe</text>

  <!-- Transitory edges -->
  <line x1="120" y1="324" x2="80" y2="372" class="edge-transitory"/>
  <line x1="160" y1="324" x2="210" y2="372" class="edge-transitory"/>
  <line x1="200" y1="324" x2="340" y2="372" class="edge-transitory"/>

  <!-- Hover indicator -->
  <rect x="76" y="286" width="168" height="42" rx="6" fill="none" stroke="#569cd6" stroke-width="1.5" opacity="0.4"/>

  <!-- Annotation: hover -->
  <line x1="405" y1="385" x2="520" y2="395" class="annotation-line"/>
  <text x="525" y="392" class="annotation">#3: Hover shows hidden children</text>
  <text x="525" y="404" class="annotation-small label-small">semi-transparent, fixed small size</text>
  <text x="525" y="416" class="annotation-small label-small">disappear when hover ends</text>

  <!-- === Close button example === -->
  <!-- X button on parent 2 -->
  <circle cx="225" cy="130" r="7" fill="#3c3c3c" stroke="#808080" stroke-width="0.5"/>
  <text x="225" y="134" text-anchor="middle" fill="#808080" font-size="9">×</text>

  <!-- Annotation: close -->
  <line x1="232" y1="126" x2="30" y2="82" class="annotation-line"/>
  <text x="10" y="72" class="annotation">#5: Close button on non-focus nodes</text>
  <text x="10" y="84" class="annotation-small label-small">closed nodes rejoin cluster or counter</text>

  <!-- === Context menu sketch (right-click) === -->
  <rect x="470" y="440" width="200" height="130" rx="4" fill="#252526" stroke="#3c3c3c"/>
  <text x="480" y="458" fill="#d4d4d4" font-size="11" font-weight="600">Pre-existing Type 2 DM</text>
  <line x1="470" y1="465" x2="670" y2="465" stroke="#3c3c3c"/>
  <text x="480" y="480" class="label">Parents (1):</text>
  <text x="490" y="494" class="label-small">☑ DM in pregnancy</text>
  <text x="480" y="514" class="label">Hidden children (2):</text>
  <text x="490" y="528" class="label-small">☐ Insulin-requiring</text>
  <text x="490" y="542" class="label-small">☐ Non-insulin-requiring</text>
  <text x="480" y="562" fill="#569cd6" font-size="10">View in detail panel →</text>

  <!-- Annotation: context menu -->
  <line x1="465" y1="460" x2="420" y2="324" class="annotation-line"/>
  <text x="300" y="455" class="annotation">#4: Right-click context menu</text>
  <text x="300" y="467" class="annotation-small label-small">toggle visibility of specific neighbors</text>
  <text x="300" y="479" class="annotation-small label-small">checked = shown, unchecked = hidden</text>

  <!-- Legend -->
  <rect x="20" y="510" width="250" height="100" rx="4" fill="#252526" stroke="#3c3c3c"/>
  <text x="30" y="528" fill="#808080" font-size="10" font-weight="600">Legend</text>
  <rect x="30" y="536" width="30" height="12" rx="2" fill="#4a3a00" stroke="#dcdcaa" stroke-width="1.5"/>
  <text x="66" y="546" class="label-small">Selected/focus node</text>
  <rect x="30" y="554" width="30" height="12" rx="2" fill="#2d4a2d" stroke="#6a9955" stroke-width="1"/>
  <text x="66" y="564" class="label-small">Ancestor beyond 1-hop</text>
  <rect x="30" y="572" width="30" height="12" rx="8" fill="#2d2d30" stroke="#569cd6" stroke-width="1" stroke-dasharray="3,2"/>
  <text x="66" y="582" class="label-small">Collapsed cluster</text>
  <rect x="30" y="590" width="30" height="12" rx="2" fill="#2d2d30" stroke="#569cd6" stroke-width="1" opacity="0.5"/>
  <text x="66" y="600" class="label-small">Transitory (hover) node</text>
</svg>
