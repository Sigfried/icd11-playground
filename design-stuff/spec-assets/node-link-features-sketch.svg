<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 640" font-family="-apple-system, sans-serif">
  <style>
    .label { font-size: 11px; fill: #d4d4d4; }
    .label-small { font-size: 9px; fill: #808080; }
    .badge { font-size: 8px; fill: #4fc1ff; }
    .badge-children { font-size: 8px; fill: #dcdcaa; }
    .annotation { font-size: 10px; fill: #ce9178; font-style: italic; }
    .annotation-line { stroke: #ce9178; stroke-width: 1; stroke-dasharray: 4,3; fill: none; }
    .edge { stroke: #555; stroke-width: 1.5; fill: none; }
    .edge-transitory { stroke: #555; stroke-width: 1; stroke-dasharray: 3,3; fill: none; opacity: 0.6; }
  </style>

  <rect width="900" height="640" fill="#1e1e1e" rx="8"/>
  <text x="450" y="28" text-anchor="middle" font-size="13" fill="#569cd6" font-weight="600">Node-Link View — Combined Features Sketch</text>

  <!-- === LAYER 0: Ancestor (beyond 1-hop, dimmed) === -->
  <rect x="340" y="50" width="160" height="32" rx="4" fill="#2d2d30" stroke="#3c3c3c" opacity="0.7"/>
  <text x="360" y="70" class="label" opacity="0.7">Endocrine diseases</text>
  <text x="490" y="63" class="badge-children">12↓</text>

  <!-- Edge: ancestor -> parent -->
  <line x1="420" y1="82" x2="420" y2="120" class="edge"/>

  <!-- Annotation: ancestors beyond 1-hop -->
  <line x1="520" y1="66" x2="620" y2="52" class="annotation-line"/>
  <text x="625" y="48" class="annotation">#1: Ancestors to depth 2</text>
  <text x="625" y="60" class="label-small">dimmed; stops before root + top-level</text>

  <!-- === LAYER 1: Parents === -->
  <!-- Parent 1 (canonical) -->
  <rect x="310" y="120" width="180" height="36" rx="4" fill="#2d2d30" stroke="#3c3c3c"/>
  <text x="320" y="140" class="label">Diabetes mellitus</text>
  <text x="430" y="150" class="badge">1↑</text>
  <text x="450" y="150" class="badge-children">8↓</text>

  <!-- Parent 2 -->
  <rect x="80" y="128" width="160" height="32" rx="4" fill="#2d2d30" stroke="#3c3c3c"/>
  <text x="90" y="148" class="label">Pregnancy complications</text>
  <text x="224" y="142" class="badge">2↑</text>

  <!-- Annotation: area-proportional badges -->
  <line x1="475" y1="140" x2="620" y2="115" class="annotation-line"/>
  <text x="625" y="112" class="annotation">#6: Area-proportional badges</text>
  <text x="625" y="124" class="label-small">area ∝ count; median = default size</text>
  <text x="625" y="136" class="label-small">separate medians per badge type</text>

  <!-- Edges: parents -> focus -->
  <line x1="400" y1="156" x2="400" y2="200" class="edge"/>
  <line x1="160" y1="160" x2="340" y2="200" class="edge"/>

  <!-- === LAYER 2: Focus node === -->
  <rect x="290" y="200" width="220" height="44" rx="4" fill="#4a3a00" stroke="#dcdcaa" stroke-width="2.5"/>
  <text x="300" y="222" fill="#dcdcaa" font-size="12" font-weight="700">DM in pregnancy</text>
  <text x="430" y="222" class="badge">2↑</text>
  <text x="450" y="222" class="badge-children">5↓</text>

  <!-- === LAYER 3: Children — 2 visible + collapsed cluster === -->

  <!-- Visible child 1 -->
  <rect x="100" y="290" width="170" height="34" rx="4" fill="#2d2d30" stroke="#3c3c3c"/>
  <text x="110" y="310" class="label">Pre-existing Type 1 DM</text>
  <text x="245" y="304" class="badge">1↑</text>
  <text x="255" y="304" class="badge-children">3↓</text>

  <!-- Visible child 2 -->
  <rect x="290" y="290" width="170" height="34" rx="4" fill="#2d2d30" stroke="#3c3c3c"/>
  <text x="300" y="310" class="label">Pre-existing Type 2 DM</text>
  <text x="435" y="304" class="badge">1↑</text>
  <text x="445" y="304" class="badge-children">2↓</text>

  <!-- Collapsed cluster (after visible children) -->
  <rect x="480" y="286" width="140" height="42" rx="12" fill="#2d2d30" stroke="#569cd6" stroke-width="1.5" stroke-dasharray="4,2"/>
  <text x="550" y="306" text-anchor="middle" fill="#569cd6" font-size="11">3 more children</text>
  <text x="550" y="318" text-anchor="middle" class="label-small">7 descendants total</text>

  <!-- Edges: focus -> children -->
  <line x1="355" y1="244" x2="185" y2="290" class="edge"/>
  <line x1="400" y1="244" x2="375" y2="290" class="edge"/>
  <line x1="445" y1="244" x2="550" y2="286" class="edge" stroke-dasharray="4,2"/>

  <!-- Annotation: collapsible cluster -->
  <line x1="625" y1="307" x2="700" y2="290" class="annotation-line"/>
  <text x="705" y="287" class="annotation">#2: Collapsed cluster</text>
  <text x="705" y="299" class="label-small">dashed border, rounded, shows count</text>
  <text x="705" y="311" class="label-small">click to expand; hover to preview (#3)</text>

  <!-- === Transitory hover nodes === -->
  <!-- Hovering over "Pre-existing Type 1 DM" shows its children transiently -->
  <rect x="30" y="375" width="110" height="26" rx="4" fill="#2d2d30" stroke="#569cd6" stroke-width="1" opacity="0.5"/>
  <text x="85" y="392" text-anchor="middle" class="label" opacity="0.6">Mild</text>

  <rect x="150" y="375" width="110" height="26" rx="4" fill="#2d2d30" stroke="#569cd6" stroke-width="1" opacity="0.5"/>
  <text x="205" y="392" text-anchor="middle" class="label" opacity="0.6">Moderate</text>

  <rect x="270" y="375" width="110" height="26" rx="4" fill="#2d2d30" stroke="#569cd6" stroke-width="1" opacity="0.5"/>
  <text x="325" y="392" text-anchor="middle" class="label" opacity="0.6">Severe</text>

  <!-- Transitory edges -->
  <line x1="145" y1="324" x2="85" y2="375" class="edge-transitory"/>
  <line x1="185" y1="324" x2="205" y2="375" class="edge-transitory"/>
  <line x1="225" y1="324" x2="325" y2="375" class="edge-transitory"/>

  <!-- Hover indicator -->
  <rect x="96" y="286" width="178" height="42" rx="6" fill="none" stroke="#569cd6" stroke-width="1.5" opacity="0.4"/>

  <!-- Annotation: hover -->
  <line x1="385" y1="388" x2="520" y2="400" class="annotation-line"/>
  <text x="525" y="397" class="annotation">#3: Hover shows hidden children</text>
  <text x="525" y="409" class="label-small">semi-transparent, fixed small size</text>
  <text x="525" y="421" class="label-small">disappear when hover ends</text>

  <!-- === Close button example === -->
  <!-- X button on parent 2 -->
  <circle cx="235" cy="130" r="7" fill="#3c3c3c" stroke="#808080" stroke-width="0.5"/>
  <text x="235" y="134" text-anchor="middle" fill="#808080" font-size="9">×</text>

  <!-- Annotation: close -->
  <line x1="242" y1="126" x2="30" y2="82" class="annotation-line"/>
  <text x="10" y="72" class="annotation">#5: Close button on non-focus nodes</text>
  <text x="10" y="84" class="label-small">closed nodes rejoin cluster or counter</text>

  <!-- === Context menu sketch (right-click) === -->
  <rect x="470" y="448" width="200" height="130" rx="4" fill="#252526" stroke="#3c3c3c"/>
  <text x="480" y="466" fill="#d4d4d4" font-size="11" font-weight="600">Pre-existing Type 2 DM</text>
  <line x1="470" y1="473" x2="670" y2="473" stroke="#3c3c3c"/>
  <text x="480" y="488" class="label">Parents (1):</text>
  <text x="490" y="502" class="label-small">&#x2611; DM in pregnancy</text>
  <text x="480" y="522" class="label">Hidden children (2):</text>
  <text x="490" y="536" class="label-small">&#x2610; Insulin-requiring</text>
  <text x="490" y="550" class="label-small">&#x2610; Non-insulin-requiring</text>
  <text x="480" y="570" fill="#569cd6" font-size="10">View in detail panel &#x2192;</text>

  <!-- Annotation: context menu -->
  <line x1="465" y1="468" x2="420" y2="324" class="annotation-line"/>
  <text x="300" y="460" class="annotation">#4: Right-click context menu</text>
  <text x="300" y="472" class="label-small">toggle visibility of specific neighbors</text>
  <text x="300" y="484" class="label-small">checked = shown, unchecked = hidden</text>

  <!-- Legend -->
  <rect x="20" y="528" width="250" height="100" rx="4" fill="#252526" stroke="#3c3c3c"/>
  <text x="30" y="546" fill="#808080" font-size="10" font-weight="600">Legend</text>
  <rect x="30" y="554" width="30" height="12" rx="2" fill="#4a3a00" stroke="#dcdcaa" stroke-width="1.5"/>
  <text x="66" y="564" class="label-small">Selected/focus node</text>
  <rect x="30" y="572" width="30" height="12" rx="2" fill="#2d2d30" stroke="#3c3c3c" opacity="0.7"/>
  <text x="66" y="582" class="label-small">Ancestor (dimmed, beyond 1-hop)</text>
  <rect x="30" y="590" width="30" height="12" rx="8" fill="#2d2d30" stroke="#569cd6" stroke-width="1" stroke-dasharray="3,2"/>
  <text x="66" y="600" class="label-small">Collapsed cluster (click to expand)</text>
  <rect x="30" y="608" width="30" height="12" rx="2" fill="#2d2d30" stroke="#569cd6" stroke-width="1" opacity="0.5"/>
  <text x="66" y="618" class="label-small">Transitory (hover) node</text>
</svg>
